{% extends 'base.html.twig' %}

{% block body %}

    <!-- Timeline header - Serie & Titre de la série -->
    {% block timelineSerieHeader %}
        {% include 'timelineSerieHeader.html.twig' %}
    {% endblock %}

    <!-- Affichage conditionnel bouton Publier un commentaire, si user connecté -->
    <div class="col-lg-12">
        <div class="col-lg-4 text-center">
            {% if app.user.username is defined %}
                <a href="{{ path('post_new') }}">
                    <button type="button" class="btn btn-default btn-lg propSerieBtn">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Publier un commentaire
                    </button>
                </a>
            {% endif %}
        </div>
    </div>

    <!-- Bloc acteurs -->
    <div class="col-lg-4">
        <div class="asideBlock text-center">
            <div class="asideBlockTitle text-center">
                <h4>Acteurs</h4>
            </div>
            {% for actor in serie.actors %}
                <div class="asideBlockPictures text-center">
                    {#Ajouter {{ path('actor_show', { 'id': actor.id }) }} dans le href="" #}
                    <a href="#">
                        <div class="actorPicture text-center">
                            <figure>
                                {# Ajouter {{ actor.picture }} à la place de src='' #}
                                <img align="center" src="{{ asset ('bundles/appBundle/images/PhotoProfilHomme.jpg')}}" alt="{{ actor.firstname ~ ' ' ~  actor.lastname }}"><br/>
                            </figure>
                        </div>
                        {#<div class="actorName text-center">#}
                        {#{{ actor.firstname ~ ' ' ~  actor.lastname }}#}
                        {#</div>#}
                    </a>
                </div>
            {% endfor %}
        </div>

        <!-- Affichage conditionnel bouton Proposer un épisode, si user connecté -->
        {% if app.user.username is defined %}
            <a href="{{ path('episode_new', { 'id': serie.id }) }}">
                <button type="button" class="btn btn-default btn-lg propSerieBtn">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Ajouter un épisode
                </button>
            </a>
        {% endif %}

    </div>

    <div class="col-lg-8">
        <p><a href="{{ path('serie_index') }}"><< Retour à la liste des séries</a></p>

        <h2>Synopsis</h2>
        <p>{{ serie.summary }}</p>

        <!-- Affichage conditionnel si épisodes -->
        {% if serie.episodes %}
            <h2>Episodes</h2>
            <table>
                <td><ul>{% for episode in serie.episodes %}
                            <a href="{{ path('episode_show', {'id' : episode.id }) }}"><li>{{ episode.title }}</li></a>
                        {% endfor %}
                    </ul>
                </td>
            </table>
        {% endif %}

        <h2>Infos supplémentaires</h2>
        <p>Nombre de saisons : {{ serie.season }}</p>

        <!-- Affichage conditionnel si commentaires -->
        {% if serie.comments %}
            <p>Commentaires : {{ serie.comments }}</p>
        {% endif %}

    </div>

    <!-- Affichage conditionnel boutons modifier et supprimer un épisode, si user connecté -->
    {% if app.user.username is defined %}
        <button>
            <a href="{{ path('serie_edit', { 'id': serie.id }) }}">Modifier</a>
        </button>

        {{ form_start(delete_form) }}
        <input type="submit" value="Supprimer">
        {{ form_end(delete_form) }}
    {% endif %}

{% endblock %}
